{% extends "learning_app/base.html" %}
{% load crispy_forms_tags %}

{% block content %}
    <h1>Course Grades for {{ course.title }}</h1>

    <!-- Category Management Section -->
    <section>
        <h2>Manage Categories</h2>

        <!-- Check if the weight_form has fields (indicating there are categories) -->
        {% if weight_form.fields %}
            <!-- Weight Adjustment Form -->
            <div class="mb-3">
                <form method="post" class="form-inline my-2 my-lg-0">
                    {% csrf_token %}
                    {{ weight_form|crispy }}
                    <button class="btn btn-primary my-2 my-sm-0" type="submit">Update Weights</button>
                </form>
            </div>
        {% else %}
            <!-- Message if no categories are available -->
            <p>No categories available for weight adjustment. Please add categories first.</p>
        {% endif %}

        <!-- Form for Adding Categories -->
        <form method="post" action="#">
            {% csrf_token %}
            {{ category_form|crispy }}
            <button type="submit" class="btn btn-success">Add New Category</button>
        </form>
    </section>


<!--    &lt;!&ndash; Displaying Grades &ndash;&gt;-->
<!--    <section>-->
<!--        <h2>Student Grades</h2>-->
<!--        <table class="table">-->
<!--            <thead>-->
<!--                <tr>-->
<!--                    <th>Student</th>-->
<!--                    <th>Exercise</th>-->
<!--                    <th>Score</th>-->
<!--                    <th>Weighted Score</th>-->
<!--                    <th>Letter Grade</th>-->
<!--                </tr>-->
<!--            </thead>-->
<!--            <tbody>-->
<!--                {% for grade in grades %}-->
<!--                    <tr>-->
<!--                        <td>{{ grade.student.username }}</td>-->
<!--                        <td>{{ grade.exercise.title }}</td>-->
<!--                        <td>{{ grade.score }}</td>-->
<!--                        <td>{{ grade.weighted_score }}</td>-->
<!--                        <td>{{ grade.letter_grade }}</td>-->
<!--                    </tr>-->
<!--                {% empty %}-->
<!--                    <tr>-->
<!--                        <td colspan="5">No grades available</td>-->
<!--                    </tr>-->
<!--                {% endfor %}-->
<!--            </tbody>-->
<!--        </table>-->
<!--    </section>-->
{% endblock content %}
